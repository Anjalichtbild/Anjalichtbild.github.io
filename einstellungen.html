<!-- templates/index.html -->
<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Lichtwecker</title>

    <style>
        .big-switch {
            transform: scale(1.5);
            /* Increase size */
            margin-left: 1rem;
            /* Keep spacing consistent */
        }
    </style>
</head>

<body>
    <div class="container py-5">
        <div class="row">
            <div class="col-12 text-center">
                <h1>Wecker</h1>
            </div>
        </div>
        <div class="row p-3">
            <div class="container bg-light rounded shadow-sm p-3">
                <div class="row">

                    <div class="col-12 text-start">
                        <div class="fs-4 fw-bold">Einstellungen</div>
                    </div>
                </div>
                <div class="row p-3">
                    <div class="col-7 fs-5 fw-semibold">Weckzeit</div>
                    <div class="col-5 fw-semibold">
                        <input type="time" class="form-control text-end" id="alarmTime" name="zeit"
                            value="07:20">
                    </div>
                </div>
                <div class="row p-3">
                    <div class="col-4 fs-5 fw-semibold">Wiederholungen</div>
                </div>
                <div class="row px-3 pb-3">

                
                    <div class="col-12 text-center ">
                        <div class="btn-group w-100">
                            <input type="checkbox" class="form-check btn-check" id="montag"  checked>
                            <label class="btn btn-outline-primary" for="montag">Mo</label>

                            <input type="checkbox" class="form-check btn-check" id="dienstag" checked>
                            <label class="btn btn-outline-primary" for="dienstag">Di</label>

                            <input type="checkbox" class="form-check btn-check" id="mittwoch" checked>
                            <label class="btn btn-outline-primary" for="mittwoch">Mi</label>

                            <input type="checkbox" class="form-check btn-check" id="donnerstag" checked>
                            <label class="btn btn-outline-primary" for="donnerstag">Do</label>

                            <input type="checkbox" class="form-check btn-check" id="freitag" checked>
                            <label class="btn btn-outline-primary" for="freitag">Fr</label>

                            <input type="checkbox" class="form-check btn-check" id="samstag">
                            <label class="btn btn-outline-primary" for="samstag">Sa</label>

                            <input type="checkbox" class="form-check btn-check" id="sonntag">
                            <label class="btn btn-outline-primary" for="sonntag">So</label>
                        </div>
                    </div>
                </div>
                <div class="row p-3">
                    <div class="col-7 fs-5 fw-semibold">Dauer</div>
                    <div class="col-5 fw-semibold d-inline-flex align-items-center ">
                        <input type="number" class="form-control text-end me-2" id="alarmTimeMin" name="dauer_m"
                            value="15" step="1" min="1">min
                    </div>
                </div>
            </div>
        </div>
        <div class="row mt-3">
            <div class="col-12 text-center text-secondary">
                Beim Einschalten leuchtet das Licht ab <div class="d-inline text-info fw-semibold" id="start-time"></div> allm√§hlich auf und erreicht bei <div class="d-inline text-info fw-semibold" id="end-time"></div> die maximale Helligkeit.
            </div>
        </div>
    </div>

    <div class="container-fluid position-fixed bottom-0 start-0 bg-light g-0 border-top border-light-subtle">
        <div class="row d-flex">
            <div class="col-6 d-flex p-0 border-end  border-light-subtle">
                <a href="index.html" class="btn btn-outline-secondary border-0 flex-fill py-4 rounded-0" role="button">Speichern</a>
            </div>
            <div class="col-6 d-flex p-0 border-end  border-light-subtle">
                <a href="index.html" class="btn btn-outline-secondary border-0 flex-fill py-4 rounded-0" role="button">Abbrechen</a>
            </div>
        </div>
    </div>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
        crossorigin="anonymous"></script>
</body>

  <script>
    const endTimeInput = document.getElementById('alarmTime');
    const durationInput = document.getElementById('alarmTimeMin');
    const infoTextTime = document.getElementById('start-time');
    const infoTextEndTime = document.getElementById('end-time');

    function updateSentence() {
      const endTime = endTimeInput.value;
      const duration = parseInt(durationInput.value, 10);

      if (!endTime || isNaN(duration)) {
        infoTextTime.textContent = "invalid.";
        infoTextEndTime.textContent = "invalid.";
        return;
      }

      // Parse HH:MM into a Date
      const [hours, minutes] = endTime.split(':').map(Number);
      const endDate = new Date();
      endDate.setHours(hours);
      endDate.setMinutes(minutes);

      // Add duration (minutes)
      const startDate = new Date(endDate.getTime() - duration * 60000);
      const StartHours = startDate.getHours().toString().padStart(2, '0');
      const StartMinutes = startDate.getMinutes().toString().padStart(2, '0');
      const StartTimeStr = `${StartHours}:${StartMinutes}`;

      infoTextTime.textContent = `${StartTimeStr}`;
      infoTextEndTime.textContent = `${endTime}`;
    }

    endTimeInput.addEventListener('input', updateSentence);
    durationInput.addEventListener('input', updateSentence);
    window.addEventListener('DOMContentLoaded', updateSentence);
  </script>
</html>